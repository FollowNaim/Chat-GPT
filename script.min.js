const sendBtn=document.querySelector(".chat-input span"),chatInput=document.querySelector(".chat-input textarea"),chatbox=document.querySelector(".chatbox"),showchatbot=document.querySelector(".show-chatbot"),toggler=document.querySelector(".chatbot-toggler"),body=document.querySelector("body"),sendtxt=document.querySelector("#sendtxt"),chatInputHeight=chatInput.scrollHeight,showInfo=document.querySelector(".showInfo");let userMassage;const createChatLi=(t,e)=>{let o=document.createElement("li");o.classList.add("chat",e);let a="outgoing"===e?`<p>${t}</p>`:`<span class="material-symbols-outlined">smart_toy</span><p>${t}</p>`;return o.innerHTML=a,o.querySelector("p").textContent=t,o},generateResponse=t=>{let e=t.querySelector("p"),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${API_KEY}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:userMassage}]})};fetch(API_URL,o).then(t=>t.json()).then(t=>{e.textContent=t.choices[0].message.content}).catch(t=>{e.textContent="Opps! Something Went Wrong",e.classList.add("error")}).finally(()=>{chatbox.scrollTo(0,chatbox.scrollHeight)})},handleChat=()=>{(userMassage=chatInput.value.trim())&&(chatbox.appendChild(createChatLi(userMassage,"outgoing")),chatbox.scrollTo(0,chatbox.scrollHeight),setTimeout(()=>{let t=createChatLi("Thinking...","incoming");chatbox.appendChild(t),generateResponse(t),chatbox.scrollTo(0,chatbox.scrollHeight)},300))};toggler.addEventListener("click",()=>{body.classList.contains("show-chatbot")?body.classList.remove("show-chatbot"):body.classList.add("show-chatbot")}),chatInput.addEventListener("input",()=>{chatInput.style.height=`${chatInputHeight}px`,chatInput.style.height=`${chatInput.scrollHeight}px`}),sendBtn.addEventListener("click",handleChat);